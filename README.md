# 영양정보 통합 트래커
Upstage Information Extract 기반 AI Agent 프로토 타입


## 1. 프로젝트 개요
식단 관리가 필요한 사용자(다이어터, 당뇨 환자, 건강 관리 목적 사용자)는
영양성분표를 직접 읽고 계산해야 하는 번거로움과 하루 섭취량을 체계적으로 누적 관리하기 어렵다는 문제를 지속적으로 겪습니다.

본 프로젝트는 음식 포장지의 영양성분표 이미지를 입력으로 받아, 영양 정보를 구조화하여 추출하고, 이를 기반으로 일일 섭취 현황을 시각화·관리할 수 있는 AI Agent 데모를 구현하는 것을 목표로 합니다.


## 2. 문제 정의
기존 칼로리 계산 및 식단 관리 서비스는 다음과 같은 한계를 가집니다.

- 영양성분표를 직접 읽고 수기로 입력해야하는 불편함
- 하루 섭취량을 누적·관리하는 과정의 피로도
- OCR 기반 접근 시 낮은 정합성과 잦은 인식 오류

특시 일반적인 OCR 기반 접근은 텍스트 인식 이후에도 **추가적인 규칙 기반 후처리 로직**이 필요하며, 서비스 관점에서는 복잡도가 빠르게 증가합니다.

또 많은 기존 서비스는 
- 평균적인 음식 데이터베이스(표준 1인분 기준)에 의존하거나
- OCR 결과를 단순 텍스트 형태로 제공하는 수준에 머무르는 경우가 많아
실제 제품 단위의 영양 정보 활용에는 한계가 존재합니다.


## 3. 해결 방안
본 프로젝트는 위 문제를 다음과 같은 방식으로 해결합니다.

```
[1. 이미지 기반 입력]
- 사용자는 **음식 사진이 아닌 ‘영양성분표 이미지’**를 업로드
- 실제 제품 단위의 정보를 직접 활용
      ↓
[2. OCR + 구조화 파이프라인]
- 1단계: OCR을 통한 텍스트 인식
- 2단계: 인식 오류를 고려한 규칙 기반 보정
- 3단계: 영양성분을 **의미 단위(JSON 구조)**로 정리
      ↓
[3. 누적 관리 및 시각화]
- 세션 단위로 일일 섭취량 누적
- 도넛 차트 및 테이블 기반 시각화
- CSV 다운로드 기능 제공
      ↓
[4. 데모 수준 AI Agent 구조]
- 입력 → 해석 → 구조화 → 상태 업데이트 → 출력
- 사용자의 “이미지 업로드” 행동을 중심으로 동작하는 단순 Agent 플로우 구성

```


## 4. Why Upstage?

OCR 기반 접근의 가장 큰 한계는
**“텍스트 인식 이후의 구조화”**에 있습니다.

일반 OCR 엔진은 다음까지만 수행합니다.

"탄수화물 57 g 나트륨 230 mg"

그러나 실제 서비스에서는 아래와 같은 구조화된 결과가 필요합니다.

{
  "carbs_g": 57,
  "sodium_mg": 230
}

이 간극을 메우기 위해서는 단순 OCR을 넘어서 문서 이해 단계가 필요합니다.

### 기존 OCR 기반 방식의 한계
- OCR 결과가 비정형 텍스트로 출력됨
- 영양소 항목·숫자·단위 정합성을 맞추기 위한  
  복잡한 정규식 및 규칙 기반 후처리 필요
- 서비스 확장 시 유지보수 비용 증가

### Upstage Information Extract API의 강점

- 이미지 기반 문서에서 의미 단위 정보만 선택적으로 추출
- JSON Schema 기반 응답 → 후처리 부담 감소
- 규칙 기반 로직의 복잡도를 크게 줄일 수 있는 구조

본 프로젝트는
“OCR 이후의 복잡한 규칙 처리”라는 문제를 Upstage Information Extract API로 대체할 수 있는 가능성을 데모 수준에서 검증하는 것을 하나의 목표로 합니다.



## 5. 핵심 기술

- **Upstage Information Extract API**
  - 영양성분표 이미지 → JSON 구조화
- **JSON Schema 기반 추출**
  - calories_kcal, carbs_g, protein_g 등 명시적 필드 정의
- **Streamlit**
  - 노코드/로우코드 기반 데모 UI
- **Rule-based Aggregation**
  - 일일 섭취량 누적 및 시각화


## 6. 시스템 구성
```
[영양성분표 이미지 업로드]
        ↓
[OCR / 문서 파싱]
        ↓
[영양성분 정보 구조화]
        ↓
[일일 섭취량 누적]
        ↓
[시각화 & 다운로드]

- Frontend: Streamlit
- OCR / Parsing:
  - 초기 데모에서는 EasyOCR을 사용하여 텍스트를 인식하고, 규칙 기반 후처리로 영양성분을 파싱하였습니다.

  - 본 프로젝트에서는 이러한 구조의 한계를 인식하고, 문서 이해 단계에서 Upstage Information Extract API로 대체 가능한 Agent 구조를 설계하였습니다.

- 상태 관리: Streamlit Session State

```

## 7. 실행 방법

### 1. 환경 변수 설정
export UPSTAGE_API_KEY="up_발급받은_API_키"

### 2. 환경 변수 설정
pip install -r requirements.txt

### 3. 실행
streamlit run app.py


